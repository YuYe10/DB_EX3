# å­¦ç”Ÿé€‰è¯¾ä¸æˆç»©ç®¡ç†ç³»ç»Ÿ - å¯åŠ¨æŒ‡å—

## âœ… ç³»ç»Ÿå·²å®Œæˆå®ç°

### ğŸ“ é¡¹ç›®ç»“æ„
```
backend/
  â”œâ”€â”€ app.py              # Flaskåº”ç”¨å…¥å£ï¼ˆå·¥å‚æ¨¡å¼ï¼‰
  â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
  â”œâ”€â”€ utils.py            # å·¥å…·å‡½æ•°
  â”œâ”€â”€ db.py               # æ•°æ®åº“è¿æ¥
  â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘å±‚
  â”‚   â”œâ”€â”€ user_service.py
  â”‚   â”œâ”€â”€ student_service.py
  â”‚   â”œâ”€â”€ teacher_service.py
  â”‚   â””â”€â”€ admin_service.py
  â””â”€â”€ api/                # è·¯ç”±å±‚ï¼ˆè“å›¾ï¼‰
      â”œâ”€â”€ auth.py
      â”œâ”€â”€ student.py
      â”œâ”€â”€ teacher.py
      â””â”€â”€ admin.py
frontend/vue/src/
  â”œâ”€â”€ App.vue             # ä¸»è·¯ç”±æ§åˆ¶å™¨
  â””â”€â”€ components/
      â”œâ”€â”€ Login.vue       # ç™»å½•ç•Œé¢
      â”œâ”€â”€ StudentView.vue # å­¦ç”Ÿç•Œé¢
      â”œâ”€â”€ TeacherView.vue # æ•™å¸ˆç•Œé¢
      â””â”€â”€ AdminView.vue   # ç®¡ç†å‘˜ç•Œé¢
```

**æ³¨**: åç«¯å·²é‡æ„ä¸ºæ¨¡å—åŒ–æ¶æ„ï¼Œè¯¦è§ [backend/REFACTORING_REPORT.md](backend/REFACTORING_REPORT.md)

### ğŸš€ å¯åŠ¨æ­¥éª¤

#### 1. å¯åŠ¨åç«¯
```powershell
cd backend
python app.py
```

**å¦‚æœé‡åˆ°æ¨¡å—æœªå®‰è£…é”™è¯¯ï¼š**
```powershell
pip install flask flask-cors flask-session python-dotenv psycopg2-binary
```

åç«¯å°†è¿è¡Œåœ¨ `http://localhost:5000`

#### 2. å¯åŠ¨å‰ç«¯
```powershell
cd frontend/vue
npm install   # é¦–æ¬¡è¿è¡Œ
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨ `http://localhost:5173`ï¼ˆæˆ–å…¶ä»–ç«¯å£ï¼‰

### ğŸ” ç™»å½•è´¦å·

#### ç®¡ç†å‘˜
- è´¦å·: `admin`
- å¯†ç : `admin@123`

#### å­¦ç”Ÿ
- è´¦å·: å­¦å·ï¼ˆå¦‚ `S001`ï¼‰
- å¯†ç : `s` + å­¦å·ï¼ˆå¦‚ `sS001`ï¼‰

#### æ•™å¸ˆ
- è´¦å·: å·¥å·ï¼ˆå¦‚ `T001`ï¼‰
- å¯†ç : `t` + å·¥å·ï¼ˆå¦‚ `tT001`ï¼‰

**æ³¨æ„ï¼š** 
- å­¦ç”Ÿå’Œæ•™å¸ˆè´¦å·åœ¨ç®¡ç†å‘˜åˆ›å»ºå­¦ç”Ÿ/æ•™å¸ˆæ—¶è‡ªåŠ¨ç”Ÿæˆ
- æ‰€æœ‰ç”¨æˆ·å‡å¯åœ¨ç™»å½•åä¿®æ”¹å¯†ç 

### ğŸ¯ åŠŸèƒ½æ¸…å•

#### å­¦ç”Ÿç•Œé¢ âœ…
- âœ… æŸ¥çœ‹å¯é€‰è¯¾ç¨‹åˆ—è¡¨
- âœ… é€‰è¯¾æ“ä½œ
- âœ… é€€è¯¾æ“ä½œ
- âœ… æŸ¥çœ‹å·²é€‰è¯¾ç¨‹å’Œæˆç»©
- âœ… ä¿®æ”¹å¯†ç 

#### æ•™å¸ˆç•Œé¢ âœ…
- âœ… æŸ¥çœ‹æˆè¯¾è¯¾ç¨‹åˆ—è¡¨
- âœ… æŸ¥çœ‹æ¯é—¨è¯¾ç¨‹çš„å­¦ç”Ÿåå•
- âœ… å½•å…¥å’Œä¿®æ”¹å­¦ç”Ÿæˆç»©
- âœ… ä¿®æ”¹å¯†ç 

#### ç®¡ç†å‘˜ç•Œé¢ âœ…
- âœ… ç®¡ç†å­¦ç”Ÿï¼ˆCRUDï¼‰
- âœ… ç®¡ç†æ•™å¸ˆï¼ˆCRUDï¼‰
- âœ… ç®¡ç†è¯¾ç¨‹ï¼ˆCRUDï¼‰
- âœ… ç®¡ç†é€‰è¯¾è®°å½•ï¼ˆCRUDï¼‰
- âœ… æ‰¹é‡å½•å…¥æˆç»©
- âœ… æŸ¥çœ‹ç»Ÿè®¡æ•°æ®ï¼ˆå­¦ç”Ÿ/æ•™å¸ˆ/è¯¾ç¨‹/é€‰è¯¾æ•°é‡ï¼‰
- âœ… æŸ¥çœ‹è¯¾ç¨‹å¹³å‡æˆç»©

### ğŸ—„ï¸ æ•°æ®åº“è¡¨ç»“æ„

```sql
-- å­¦ç”Ÿè¡¨
students (id, student_no, name, major)

-- æ•™å¸ˆè¡¨
teachers (id, teacher_no, name, department)

-- è¯¾ç¨‹è¡¨
courses (id, course_code, name, credit, capacity, teacher_id)

-- é€‰è¯¾è¡¨
enrollments (id, student_id, course_id, status, grade, enrolled_at)

-- ç”¨æˆ·è¡¨ï¼ˆæ–°å¢ï¼‰
users (id, username, password, role, ref_id, created_at)
```

### ğŸ”’ æƒé™æ§åˆ¶

- **å­¦ç”Ÿ**: åªèƒ½é€‰è¯¾/é€€è¯¾/æŸ¥çœ‹è‡ªå·±çš„é€‰è¯¾
- **æ•™å¸ˆ**: åªèƒ½æŸ¥çœ‹å’Œç®¡ç†è‡ªå·±æˆè¯¾çš„è¯¾ç¨‹åŠå­¦ç”Ÿæˆç»©
- **ç®¡ç†å‘˜**: å®Œæ•´çš„CRUDæƒé™

æ‰€æœ‰APIéƒ½ä½¿ç”¨Flask-Sessionè¿›è¡Œèº«ä»½éªŒè¯å’Œæƒé™æ£€æŸ¥ã€‚

### ğŸ¨ ç•Œé¢ç‰¹æ€§

- âœ¨ æ¸å˜åŠ¨ç”»èƒŒæ™¯
- ğŸ“± å“åº”å¼è®¾è®¡ï¼ˆæ”¯æŒæ‰‹æœº/å¹³æ¿/æ¡Œé¢ï¼‰
- ğŸ­ ç»ç’ƒæ€æ¯›ç»ç’ƒæ•ˆæœ
- ğŸ”„ å¹³æ»‘åŠ¨ç”»å’Œè¿‡æ¸¡
- ğŸ’« ç°ä»£åŒ–UIè®¾è®¡

### ğŸ“ ç¯å¢ƒé…ç½®

ç¡®ä¿ `.env` æ–‡ä»¶é…ç½®æ­£ç¡®ï¼š

```env
OG_HOST=127.0.0.1
OG_PORT=26000
OG_DBNAME=student_db
OG_USER=appuser
OG_PASSWORD=your_password
OG_SSH_TUNNEL=false
SECRET_KEY=your-secret-key-change-in-production
```

### âš ï¸ å¸¸è§é—®é¢˜

1. **åç«¯å¯åŠ¨å¤±è´¥ - ModuleNotFoundError**
   - è¿è¡Œ: `pip install -r requirements.txt`

2. **å‰ç«¯æ— æ³•è¿æ¥åç«¯**
   - æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œåœ¨ `http://localhost:5000`
   - æ£€æŸ¥CORSé…ç½®

3. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - ç¡®è®¤openGaussæœåŠ¡è¿è¡Œæ­£å¸¸
   - æ£€æŸ¥ `.env` é…ç½®
   - ç¡®è®¤ç”¨æˆ·appuseræœ‰è¶³å¤Ÿæƒé™

4. **ç”¨æˆ·ç™»å½•å¤±è´¥**
   - ç®¡ç†å‘˜è´¦å·éœ€è¦æ‰‹åŠ¨åœ¨æ•°æ®åº“åˆå§‹åŒ–æ—¶åˆ›å»º
   - å­¦ç”Ÿ/æ•™å¸ˆè´¦å·åœ¨åˆ›å»ºæ•°æ®æ—¶è‡ªåŠ¨ç”Ÿæˆ

### ğŸ‰ å¼€å§‹ä½¿ç”¨

1. å¯åŠ¨åç«¯å’Œå‰ç«¯
2. æµè§ˆå™¨æ‰“å¼€å‰ç«¯åœ°å€
3. ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•
4. åˆ›å»ºå­¦ç”Ÿã€æ•™å¸ˆã€è¯¾ç¨‹
5. åˆ‡æ¢åˆ°å­¦ç”Ÿ/æ•™å¸ˆè´¦å·æµ‹è¯•åŠŸèƒ½

---

**å¼€å‘å®Œæˆæ—¥æœŸ**: 2025å¹´12æœˆ11æ—¥
**æŠ€æœ¯æ ˆ**: Vue 3 + Flask + openGauss + Flask-Session
